sudo: required

language: node_js
node_js:
  - 6
  - 7
  - node

matrix:
  allow_failures:
  - node_js: node

services:
  - docker

before_install:
  - pip install --user awscli # install aws cli w/o sudo
  - export PATH=$PATH:$HOME/.local/bin # put aws in the path
  - bash lambda/test/scripts/aws_credentials.sh
  - docker-compose -f docker-compose.test.yml build
  - make db
  - cd lambda

script:
  - npm test
